---
layout: post
title: "Bandwidth simulation"
tags: ["bandwidth", "bandwidth", "networking", "networking", "simulations", "simulations", "websurfing", "websurfing"]
---
<hr>Original post can be found at:  <a href="http://ealdent.wordpress.com/2009/01/06/bandwidth-simulation/" target="_blank">http://ealdent.wordpress.com/2009/01/06/bandwidth-simulation/</a><br /><br />
<p>At work, we've been having problems with not enough bandwidth.  When more than one person uses the net at a time, performance degrades.  At times, it slows to a crawl.  No one can update their computers using that connection or else it affects everyone in the office.  We're waiting on the data company to upgrade our service.  I'm not a networking person, and I'm not interested in becoming one.  I really don't want to spend more time working on it than I have to.  But it's pretty obvious that if you double your bandwidth, you not only increase the speed of your connection, but you decrease the chance of collisions (two or more users accessing the connection simultaneously).</p>
<p>But I wondered just how much of an effect it would have.  So I created a simulation.  My simulation consists of users with random behavior that mimicks real users.  I create random users who access between 0-120 web pages per hour, each of which varies between 75-125 KB uniformly.  I also imagine that these users download between 0-5 large downloads per day, each of which varies between 0-10 MB uniformly.  That sounds pretty reasonable to me.  Then I run through some large number of seconds, each user spawning downloads according to their models, and seeing how bandwidth is affected.</p>
<p>At the end of the simulation, I record the number of downloads, the average file size downloaded, the average speed of downloads, and the percentage of the maximum bandwidth that works out to be.  We expect the average speed of downloads to be greater with higher bandwidth connections, but it's the percentage of the maximum speed that's important.</p>
<p>I ran multiple simulations with 2, 5, 10, 20, 30, and 50 users over 100k seconds with 175 KB/s, 350 KB/s and 525 KB/s (approximately equivalent to a T1, 2 bonded T1s, and 3 bonded T1s).  As you can see from the table, performance degrades more rapidly for connections with less bandwidth.  Connections with higher bandwidth are more resilient as more users get connected.</p>

<p align="center"><table border="1" align="center">
<thead>
<tr>
<th># Users</th>
<th>175 KB/s</th>
<th>350 KB/s</th>
<th>525 KB/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>98.5012</td>
<td>98.759</td>
<td>99.0904</td>
</tr>
<tr>
<td>5</td>
<td>94.139</td>
<td>94.8358</td>
<td>95.07</td>
</tr>
<tr>
<td>10</td>
<td>85.7544</td>
<td>88.5822</td>
<td>88.1656</td>
</tr>
<tr>
<td>20</td>
<td>68.8986</td>
<td>75.2786</td>
<td>77.053</td>
</tr>
<tr>
<td>30</td>
<td>52.5134</td>
<td>67.2558</td>
<td>69.4318</td>
</tr>
<tr>
<td>50</td>
<td>14.0288</td>
<td>48.3792</td>
<td>52.1336</td>
</tr>
</tbody></table></p><br />
<p>Values in the table are the average percentage of the maximum bandwidth that each user experiences.  Nothing Earth-shattering here, but fun to play with.
</p><p align="center"><img class="aligncenter size-full wp-image-986" title="bandwidth-simulation2" src="http://ealdent.files.wordpress.com/2009/01/picture-11.png" alt="bandwidth-simulation2" width="500" height="276" /></p>
<p><em>Update</em>:  I have published the code used for <a href="http://ealdent.github.com/2009/01/09/bandwidth-simulation-code.html">this simulation</a>.</p>
